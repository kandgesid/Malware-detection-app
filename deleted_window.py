# -*- coding: utf-8 -*-

# Form implementation generated from reading ui file 'Deleted_files.ui'
#
# Created by: PyQt5 UI code generator 5.15.2
#
# WARNING: Any manual changes made to this file will be lost when pyuic5 is
# run again.  Do not edit this file unless you know what you are doing.


from PyQt5 import QtCore, QtGui
import sys
import os
from PyQt5.QtWidgets import QApplication, QPushButton, QLabel, QCheckBox, QMainWindow, QVBoxLayout, QHBoxLayout, QGroupBox, QDialog, QScrollBar, QFormLayout, QScrollArea

class Delete_Window(QDialog) :
    def __init__(self, result) :
        super().__init__()
        self.title = "Delete the Files"
        self.left = 200
        self.top = 400
        self.width =  800
        self.height = 100
        self.files = []
        for file in result.keys() :
            if(result[file] != "benign") :
                self.files.append(file)

        self.insertCheckBox()
        vbox = QVBoxLayout()
        scroll = QScrollArea()
        scroll.setWidget(self.groupbox)
        scroll.setWidgetResizable(True)
        scroll.setFixedHeight(400)
        vbox.addWidget(scroll)
        pushButton = QPushButton("Delete Selected")
        vbox.addWidget(pushButton)
        #vbox.addWidget(self.groupbox)
        self.setLayout(vbox)
        pushButton.clicked.connect(self.delete_files)


        self.InitWindow()
        print("after delete")

    def InitWindow(self) :
        self.setWindowTitle(self.title)
        self.setGeometry(self.left, self.top, self.width, self.height)

        print(self.show())
    def delete_files(self) :
        list_files = []
        for i in range(len(self.checkbox_list)) :
            if(self.checkbox_list[i].isChecked()) :
                os.remove(self.files[i])
        sys.exit(App.exec())

        

    def insertCheckBox(self) :
        self.groupbox = QGroupBox("Select the files to be deleted")
        self.groupbox.setFont(QtGui.QFont("Sansserif", 13))
        Vbox = QVBoxLayout()
        innervbox = QVBoxLayout()
        formLayout = QFormLayout()
        self.checkbox_list = [QCheckBox(file) for file in self.files]
        for i in range(len(self.checkbox_list)) :
            #self.check1 = QCheckBox(file)
            #self.check1.setIcon(QtGui.QIcon())
            #Vbox.addWidget(self.checkbox_list[i])
            formLayout.addRow(self.checkbox_list[i])
        self.groupbox.setLayout(formLayout)
    """ scrollbox = QScrollArea()
        scrollbox.addWidget(innervbox)
        scrollbox.setWidgetResizable(True)
        scrollbox.setFixedHeight(400)
        pushbutton = QPushButton("Delete Selectd")
        Vbox.addWidget(scrollbox)
        Vbox.addWidget(pushbutton)
        self.groupbox.setLayout(Vbox) """

if __name__ == "__main__" :
    App = QApplication(sys.argv)
    files = {"Siddhant" : "Trojan", "Jatish" : "Virus", "Omkar" : "benign", "Abhishek" : "Third party"}
    window = Delete_Window(files)
    sys.exit(App.exec())
        
